(function(){"use strict";var t={8363:function(t,e,o){var a=o(7203),l=o.n(a),r=o(6848),s=(o(1454),function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("HeaderLayout"),e("div",{staticClass:"container mx-auto my-4 flex flex-col gap-6 relative min-h-[1200px] px-8"},[e("div",{staticClass:"column-selector mb-4"},[e("el-checkbox-group",{model:{value:t.selectedColumns,callback:function(e){t.selectedColumns=e},expression:"selectedColumns"}},t._l(t.availableColumns,(function(o){return e("el-checkbox",{key:o.prop,attrs:{label:o.prop,disabled:["no","name","author","tags","wordCount","completed"].includes(o.prop)}},[t._v(t._s(o.label))])})),1)],1),e("el-table",{ref:"dataTable",staticStyle:{width:"max-content","table-layout":"fixed"},attrs:{data:t.caitviList,border:"",stripe:""}},[t.selectedColumns.includes("no")?e("el-table-column",{attrs:{prop:"no",label:"",width:"46"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",{staticClass:"whitespace-nowrap"},[t._v(t._s(o.row.no))])]}}],null,!1,2953395322)}):t._e(),t.selectedColumns.includes("name")?e("el-table-column",{attrs:{prop:"name",label:"名稱",width:"200"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",{staticClass:"cursor-pointer hover:text-blue-400 font-bold",on:{click:function(e){return t.openUrl(o.row.url)}}},[t._v(t._s(o.row.name))])]}}],null,!1,1632970748)}):t._e(),t.selectedColumns.includes("author")?e("el-table-column",{attrs:{prop:"author",label:"作者",width:"100","filter-method":(e,o)=>t.filterByEqual(e,o,"author"),filters:t.authorFilters}}):t._e(),t.selectedColumns.includes("chapters")?e("el-table-column",{attrs:{label:"章節",width:"80"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("span",[t._v(t._s(o.row.completedChapters)+" / "+t._s(o.row.allChapters))])]}}],null,!1,4244220072)}):t._e(),t.selectedColumns.includes("wordCount")?e("el-table-column",{attrs:{prop:"wordCount",label:"字數",width:"100","filter-method":t.filterWordCount,filters:t.wordCountFilters}}):t._e(),t.selectedColumns.includes("completed")?e("el-table-column",{attrs:{prop:"completed",label:"狀態",width:"100","filter-method":(e,o)=>t.filterByEqual(e,o,"completed"),filters:[{text:t.CONST_COMMON.completedStatus.COMPLETED,value:"COMPLETED"},{text:t.CONST_COMMON.completedStatus.WORK_IN_PROGRESS,value:"WORK_IN_PROGRESS"},{text:t.CONST_COMMON.completedStatus.ONE_SHOT,value:"ONE_SHOT"},{text:t.CONST_COMMON.completedStatus.DISCONTINUED,value:"DISCONTINUED"}]},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{staticClass:"rounded-full",attrs:{effect:"dark",type:t.getCompletedStatusColor(o.row.completed)}},[t._v(t._s(t.CONST_COMMON.completedStatus[o.row.completed]))])]}}],null,!1,2976611197)}):t._e(),t.selectedColumns.includes("lastUpdated")?e("el-table-column",{attrs:{prop:"lastUpdated",label:"最後一次更新",width:"120"}}):t._e(),t.selectedColumns.includes("tags")?e("el-table-column",{attrs:{prop:"tags",label:"標籤",width:"200",filters:t.tagList.map((t=>({text:t.name,value:t.name}))),"filter-method":t.filterTags},scopedSlots:t._u([{key:"default",fn:function(o){return[o.row.tags.length>0?e("div",{staticClass:"flex flex-wrap gap-2"},t._l(o.row.tags,(function(o,a){return e("el-tooltip",{key:a,attrs:{content:o.name,effect:"dark",placement:"top"}},[e("el-tag",{staticClass:"rounded-full",attrs:{color:o.color,effect:o.effect}},[t._v(t._s(o.name))])],1)})),1):t._e()]}}],null,!1,398845505)}):t._e(),t.selectedColumns.includes("read")?e("el-table-column",{attrs:{label:"閱讀",width:"100","filter-method":(e,o)=>t.filterByEqual(e,o,"read"),filters:[{text:t.CONST_COMMON.readStatus.READ,value:"READ"},{text:t.CONST_COMMON.readStatus.UNREAD,value:"UNREAD"},{text:t.CONST_COMMON.readStatus.DROPPED,value:"DROPPED"}]},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-tag",{attrs:{effect:"dark",type:t.getReadStatusColor(o.row.read)}},[t._v(t._s(t.CONST_COMMON.readStatus[o.row.read]))])]}}],null,!1,2087081184)}):t._e(),t.selectedColumns.includes("rate")?e("el-table-column",{attrs:{prop:"rate",label:"評分",width:"120"},scopedSlots:t._u([{key:"default",fn:function(o){return[e("el-rate",{attrs:{disabled:""},model:{value:o.row.rate,callback:function(e){t.$set(o.row,"rate",e)},expression:"scope.row.rate"}})]}}],null,!1,617110565)}):t._e(),t.selectedColumns.includes("storySetting")?e("el-table-column",{attrs:{prop:"storySetting",label:"簡介/心得",width:"400"}}):t._e(),t.selectedColumns.includes("hotChapters")?e("el-table-column",{attrs:{prop:"hotChapters",label:"hot",width:"100"}}):t._e()],1)],1),e("FooterLayout")],1)}),n=[],i=(o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698),o(8992),o(4520),o(2577),o(670),o(7550),o(4373));const u="1P0J7yLE6Nd7GSSJnDW2nal2zVoM3VBfYDVjg9TO0GM8",c="AIzaSyBShPyVWqfNA1odtb42EE6cvedpSFsTmWM",d="caitvilist",p=`https://sheets.googleapis.com/v4/spreadsheets/${u}/values/${d}?key=${c}`,f=async()=>{try{const t=await i.A.get(p),e=t.data.values||[];return e.slice(1).map((t=>({no:t[0],name:t[1],url:t[2],author:t[3],completedChapters:t[4],allChapters:t[5],completed:t[6],lastUpdated:t[7],wordCount:t[8],tags:t[9],read:t[10],rate:t[11],memo:t[12],storySetting:t[13],hotChapters:t[14]})))}catch(t){throw console.error("獲取列表失敗:",t),t}},m=Object.freeze({completedStatus:{COMPLETED:"已完結",WORK_IN_PROGRESS:"連載中",DISCONTINUED:"疑似斷更",ONE_SHOT:"單篇",STATUS_UNKNOWN:"狀態未知"},readStatus:{READ:"已閱讀",UNREAD:"閒置中",DROPPED:"已棄置",READING:"閱讀中"}});var h=function(){var t=this,e=t._self._c;return e("header",{staticClass:"h-16 bg-gray-950 flex items-center justify-center"},[e("h1",{staticClass:"text-white text-xl font-bold cursor-pointer",on:{click:function(e){t.showSound=!t.showSound}}},[t._v("CaitVi")]),t.showSound?[e("i",{staticClass:"el-icon-video-play text-white cursor-pointer ml-2 text-[18px]",on:{click:t.playSound}}),e("i",{staticClass:"el-icon-video-pause text-white cursor-pointer ml-2 text-[18px]",on:{click:t.pauseSound}}),e("i",{staticClass:"el-icon-refresh-right text-white cursor-pointer ml-2 text-[18px]",on:{click:t.stopSound}})]:t._e()],2)},C=[],b={name:"HeaderLayout",data(){return{audio:null,showSound:!1}},mounted(){this.audio=new Audio("/sound/caitvi.mp3")},methods:{async playSound(){try{this.audio||(this.audio=new Audio("/sound/caitvi.mp3")),await this.audio.play()}catch(t){console.error("播放音效失敗:",t)}},pauseSound(){this.audio&&this.audio.pause()},stopSound(){this.audio&&(this.audio.pause(),this.audio.currentTime=0)}},beforeUnmount(){this.audio&&(this.audio.pause(),this.audio=null)}},S=b,v=o(1656),O=(0,v.A)(S,h,C,!1,null,null,null),_=O.exports,w=function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex flex-row justify-center items-center bg-current h-[150px] relative bottom-0"},[e("span",{staticClass:"text-white"},[t._v("Copyright ©"+t._s((new Date).getFullYear())+" h2")])])},g=[],y={name:"FooterLayout"},x=y,N=(0,v.A)(x,w,g,!1,null,null,null),E=N.exports,T={name:"App",components:{HeaderLayout:_,FooterLayout:E},data(){return{CONST_COMMON:m,caitviList:[],tagColorList:[{color:"#DDEB9D",effect:"plain"},{color:"#A0C878",effect:"plain"},{color:"#27667B",effect:"dark"},{color:"#143D60",effect:"dark"},{color:"#042A2B",effect:"dark"},{color:"#316E75",effect:"dark"},{color:"#5EB1BF",effect:"plain"},{color:"#CDEDF6",effect:"plain"},{color:"#EF7B45",effect:"plain"},{color:"#D84727",effect:"dark"},{color:"#041E2B",effect:"dark"},{color:"#315A75",effect:"dark"},{color:"#5E96BF",effect:"plain"},{color:"#CCE2F6",effect:"plain"},{color:"#B96A7C",effect:"dark"},{color:"#9F3D60",effect:"dark"},{color:"#B4B8AB",effect:"plain"},{color:"#657577",effect:"dark"},{color:"#153243",effect:"dark"},{color:"#1F3F53",effect:"dark"},{color:"#284B63",effect:"dark"},{color:"#8EA2A6",effect:"plain"}],availableColumns:[{prop:"no",label:"編號"},{prop:"name",label:"名稱"},{prop:"author",label:"作者"},{prop:"chapters",label:"章節"},{prop:"wordCount",label:"字數"},{prop:"completed",label:"狀態"},{prop:"lastUpdated",label:"最後一次更新"},{prop:"read",label:"閱讀"},{prop:"rate",label:"評分"},{prop:"storySetting",label:"簡介/心得"},{prop:"tags",label:"標籤"},{prop:"hotChapters",label:"hot"}],selectedColumns:["no","name","author","chapters","wordCount","completed","storySetting","tags"],wordCountFilters:[{text:"<5,000",value:"0-5000"},{text:"5,001~10,000",value:"5001-10000"},{text:"10,001~50,000",value:"10001-50000"},{text:"50,001~100,000",value:"50001-100000"},{text:"100,001~150,000",value:"100001-150000"},{text:"150,001~200,000",value:"150001-200000"},{text:">200,000",value:"200001-"}],tagList:[]}},computed:{authorFilters(){const t=[...new Set(this.caitviList.map((t=>t.author)))].filter((t=>t)).sort();return t.map((t=>({text:t,value:t})))}},mounted(){this.initList();const t=localStorage.getItem("selectedColumns");if(t){const e=JSON.parse(t),o=["no","name","author"];this.selectedColumns=[...new Set([...o,...e])],this.refreshTable()}},watch:{selectedColumns:{handler(t){localStorage.setItem("selectedColumns",JSON.stringify(t))},deep:!0}},methods:{async initList(){const t=await f();this.caitviList=t.map((t=>({...t,rate:Number(t.rate)||0})));const e=this.caitviList.map((t=>t.tags)).filter((t=>t)).flatMap((t=>t.split(","))).map((t=>t.trim())).filter((t=>t)),o=[...new Set(e)].sort(((t,e)=>{const o=t.startsWith("Part of"),a=e.startsWith("Part of");return o&&!a?1:!o&&a?-1:t.localeCompare(e)}));this.tagList=o.map(((t,e)=>{const o=this.tagColorList[e%this.tagColorList.length];return{name:t,color:o.color,effect:o.effect}})),this.caitviList=this.caitviList.map((t=>({...t,tags:t.tags?t.tags.split(",").map((t=>t.trim())).filter((t=>t)).map((t=>this.tagList.find((e=>e.name===t)))):[]})))},openUrl(t){window.open(t,"_blank")},getReadStatusColor(t){const e=String(t).toUpperCase();switch(e){case"READ":return"success";case"UNREAD":return"info";case"DROPPED":return"danger";case"READING":return"warning"}},getCompletedStatusColor(t){const e=String(t).toUpperCase();switch(e){case"COMPLETED":return"success";case"WORK_IN_PROGRESS":return"warning";case"DISCONTINUED":return"danger";case"ONE_SHOT":return"";case"STATUS_UNKNOWN":return"info"}},filterByEqual(t,e,o){return e[o]===t},filterWordCount(t,e){const o=Number(e.wordCount.replace(/,/g,""))||0,[a,l]=t.split("-").map(Number);return l?o>=a&&o<=l:o>a},filterTags(t,e){return e.tags.some((e=>e.name===t))},refreshTable(){this.$nextTick((()=>{this.$refs.dataTable&&(this.$refs.dataTable.doLayout(),this.$refs.dataTable.store.updateColumns(),this.$refs.dataTable.store.updateAllSelected())}))}}},k=T,D=(0,v.A)(k,s,n,!1,null,null,null),M=D.exports;r["default"].config.productionTip=!1,r["default"].use(l()),new r["default"]({render:t=>t(M)}).$mount("#app")}},e={};function o(a){var l=e[a];if(void 0!==l)return l.exports;var r=e[a]={exports:{}};return t[a].call(r.exports,r,r.exports,o),r.exports}o.m=t,function(){var t=[];o.O=function(e,a,l,r){if(!a){var s=1/0;for(c=0;c<t.length;c++){a=t[c][0],l=t[c][1],r=t[c][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||s>=r)&&Object.keys(o.O).every((function(t){return o.O[t](a[i])}))?a.splice(i--,1):(n=!1,r<s&&(s=r));if(n){t.splice(c--,1);var u=l();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[a,l,r]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var a in e)o.o(e,a)&&!o.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,a){var l,r,s=a[0],n=a[1],i=a[2],u=0;if(s.some((function(e){return 0!==t[e]}))){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(i)var c=i(o)}for(e&&e(a);u<s.length;u++)r=s[u],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(c)},a=self["webpackChunkcaitvi"]=self["webpackChunkcaitvi"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=o.O(void 0,[504],(function(){return o(8363)}));a=o.O(a)})();
//# sourceMappingURL=app.6d56faad.js.map