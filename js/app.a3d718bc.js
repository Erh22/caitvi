(function(){"use strict";var e={5068:function(e,t,r){var o=r(3797),a=r.n(o),n=r(9940),l=r.n(n),s=r(1178),u=r.n(s),i=r(2672),c=r.n(i),d=r(874),f=r.n(d),p=r(167),m=r.n(p),h=r(6210),C=r.n(h),b=r(1275),v=r.n(b),g=r(9507),S=r.n(g),O=r(6848),_=(r(1454),function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("HeaderLayout"),t("div",{staticClass:"container mx-auto my-4 flex flex-col gap-6 relative min-h-[1200px] px-8"},[t("div",{staticClass:"column-selector mb-4"},[t("el-checkbox-group",{model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}},e._l(e.availableColumns,(function(r){return t("el-checkbox",{key:r.prop,attrs:{label:r.prop,disabled:["no","name","author","tags","wordCount","completed"].includes(r.prop)}},[e._v(e._s(r.label))])})),1)],1),t("el-table",{ref:"dataTable",staticStyle:{width:"max-content","table-layout":"fixed"},attrs:{data:e.caitviList,border:"",stripe:""}},[e.selectedColumns.includes("no")?t("el-table-column",{attrs:{prop:"no",label:"",width:"46"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticClass:"whitespace-nowrap"},[e._v(e._s(r.row.no))])]}}],null,!1,2953395322)}):e._e(),e.selectedColumns.includes("name")?t("el-table-column",{attrs:{prop:"name",label:"名稱",width:"200"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",{staticClass:"cursor-pointer hover:text-blue-400 font-bold",on:{click:function(t){return e.openUrl(r.row.url)}}},[e._v(e._s(r.row.name))])]}}],null,!1,1632970748)}):e._e(),e.selectedColumns.includes("author")?t("el-table-column",{attrs:{prop:"author",label:"作者",width:"100","filter-method":(t,r)=>e.filterByEqual(t,r,"author"),filters:e.authorFilters}}):e._e(),e.selectedColumns.includes("chapters")?t("el-table-column",{attrs:{label:"章節",width:"80"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("span",[e._v(e._s(r.row.completedChapters)+" / "+e._s(r.row.allChapters))])]}}],null,!1,4244220072)}):e._e(),e.selectedColumns.includes("wordCount")?t("el-table-column",{attrs:{prop:"wordCount",label:"字數",width:"100","filter-method":e.filterWordCount,filters:e.wordCountFilters}}):e._e(),e.selectedColumns.includes("completed")?t("el-table-column",{attrs:{prop:"completed",label:"狀態",width:"100","filter-method":(t,r)=>e.filterByEqual(t,r,"completed"),filters:[{text:e.CONST_COMMON.completedStatus.COMPLETED,value:"COMPLETED"},{text:e.CONST_COMMON.completedStatus.WORK_IN_PROGRESS,value:"WORK_IN_PROGRESS"},{text:e.CONST_COMMON.completedStatus.ONE_SHOT,value:"ONE_SHOT"},{text:e.CONST_COMMON.completedStatus.DISCONTINUED,value:"DISCONTINUED"}]},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{staticClass:"rounded-full",attrs:{effect:"dark",type:e.getCompletedStatusColor(r.row.completed)}},[e._v(e._s(e.CONST_COMMON.completedStatus[r.row.completed]))])]}}],null,!1,2976611197)}):e._e(),e.selectedColumns.includes("lastUpdated")?t("el-table-column",{attrs:{prop:"lastUpdated",label:"最後一次更新",width:"120"}}):e._e(),e.selectedColumns.includes("tags")?t("el-table-column",{attrs:{prop:"tags",label:"標籤",width:"200",filters:e.tagList.map((e=>({text:e.name,value:e.name}))),"filter-method":e.filterTags},scopedSlots:e._u([{key:"default",fn:function(r){return[r.row.tags.length>0?t("div",{staticClass:"flex flex-wrap gap-2"},e._l(r.row.tags,(function(r,o){return t("el-tooltip",{key:o,attrs:{content:r.name,effect:"dark",placement:"top"}},[t("el-tag",{staticClass:"rounded-full",attrs:{color:r.color,effect:r.effect}},[e._v(e._s(r.name))])],1)})),1):e._e()]}}],null,!1,398845505)}):e._e(),e.selectedColumns.includes("read")?t("el-table-column",{attrs:{label:"閱讀",width:"100","filter-method":(t,r)=>e.filterByEqual(t,r,"read"),filters:[{text:e.CONST_COMMON.readStatus.READ,value:"READ"},{text:e.CONST_COMMON.readStatus.UNREAD,value:"UNREAD"},{text:e.CONST_COMMON.readStatus.DROPPED,value:"DROPPED"}]},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-tag",{attrs:{effect:"dark",type:e.getReadStatusColor(r.row.read)}},[e._v(e._s(e.CONST_COMMON.readStatus[r.row.read]))])]}}],null,!1,2087081184)}):e._e(),e.selectedColumns.includes("rate")?t("el-table-column",{attrs:{prop:"rate",label:"評分",width:"120"},scopedSlots:e._u([{key:"default",fn:function(r){return[t("el-rate",{attrs:{disabled:""},model:{value:r.row.rate,callback:function(t){e.$set(r.row,"rate",t)},expression:"scope.row.rate"}})]}}],null,!1,617110565)}):e._e(),e.selectedColumns.includes("storySetting")?t("el-table-column",{attrs:{prop:"storySetting",label:"簡介/心得",width:"400"}}):e._e(),e.selectedColumns.includes("hotChapters")?t("el-table-column",{attrs:{prop:"hotChapters",label:"hot",width:"100"}}):e._e()],1)],1),t("FooterLayout")],1)}),w=[],y=(r(7642),r(8004),r(3853),r(5876),r(2475),r(5024),r(1698),r(8992),r(4520),r(2577),r(670),r(7550),r(4373));const N="1P0J7yLE6Nd7GSSJnDW2nal2zVoM3VBfYDVjg9TO0GM8",E="AIzaSyBShPyVWqfNA1odtb42EE6cvedpSFsTmWM",k="caitvilist",T=`https://sheets.googleapis.com/v4/spreadsheets/${N}/values/${k}?key=${E}`,D=async()=>{try{const e=await y.A.get(T),t=e.data.values||[];return t.slice(1).map((e=>({no:e[0],name:e[1],url:e[2],author:e[3],completedChapters:e[4],allChapters:e[5],completed:e[6],lastUpdated:e[7],wordCount:e[8],tags:e[9],read:e[10],rate:e[11],memo:e[12],storySetting:e[13],hotChapters:e[14]})))}catch(e){throw console.error("獲取列表失敗:",e),e}},x=Object.freeze({completedStatus:{COMPLETED:"已完結",WORK_IN_PROGRESS:"連載中",DISCONTINUED:"疑似斷更",ONE_SHOT:"單篇",STATUS_UNKNOWN:"狀態未知"},readStatus:{READ:"已閱讀",UNREAD:"閒置中",DROPPED:"已棄置",READING:"閱讀中"}});var A={name:"App",components:{HeaderLayout:()=>r.e(822).then(r.bind(r,6822)),FooterLayout:()=>r.e(911).then(r.bind(r,4911))},data(){return{CONST_COMMON:x,caitviList:[],tagColorList:[{color:"#DDEB9D",effect:"plain"},{color:"#A0C878",effect:"plain"},{color:"#27667B",effect:"dark"},{color:"#143D60",effect:"dark"},{color:"#042A2B",effect:"dark"},{color:"#316E75",effect:"dark"},{color:"#5EB1BF",effect:"plain"},{color:"#CDEDF6",effect:"plain"},{color:"#EF7B45",effect:"plain"},{color:"#D84727",effect:"dark"},{color:"#041E2B",effect:"dark"},{color:"#315A75",effect:"dark"},{color:"#5E96BF",effect:"plain"},{color:"#CCE2F6",effect:"plain"},{color:"#B96A7C",effect:"dark"},{color:"#9F3D60",effect:"dark"},{color:"#B4B8AB",effect:"plain"},{color:"#657577",effect:"dark"},{color:"#153243",effect:"dark"},{color:"#1F3F53",effect:"dark"},{color:"#284B63",effect:"dark"},{color:"#8EA2A6",effect:"plain"}],availableColumns:[{prop:"no",label:"編號"},{prop:"name",label:"名稱"},{prop:"author",label:"作者"},{prop:"chapters",label:"章節"},{prop:"wordCount",label:"字數"},{prop:"completed",label:"狀態"},{prop:"lastUpdated",label:"最後一次更新"},{prop:"read",label:"閱讀"},{prop:"rate",label:"評分"},{prop:"storySetting",label:"簡介/心得"},{prop:"tags",label:"標籤"},{prop:"hotChapters",label:"hot"}],selectedColumns:["no","name","author","chapters","wordCount","completed","storySetting","tags"],wordCountFilters:[{text:"<5,000",value:"0-5000"},{text:"5,001~10,000",value:"5001-10000"},{text:"10,001~50,000",value:"10001-50000"},{text:"50,001~100,000",value:"50001-100000"},{text:"100,001~150,000",value:"100001-150000"},{text:"150,001~200,000",value:"150001-200000"},{text:">200,000",value:"200001-"}],tagList:[]}},computed:{authorFilters(){const e=[...new Set(this.caitviList.map((e=>e.author)))].filter((e=>e)).sort();return e.map((e=>({text:e,value:e})))}},mounted(){this.initList();const e=localStorage.getItem("selectedColumns");if(e){const t=JSON.parse(e),r=["no","name","author"];this.selectedColumns=[...new Set([...r,...t])],this.refreshTable()}},watch:{selectedColumns:{handler(e){localStorage.setItem("selectedColumns",JSON.stringify(e))},deep:!0}},methods:{async initList(){const e=await D();this.caitviList=e.map((e=>({...e,rate:Number(e.rate)||0})));const t=this.caitviList.map((e=>e.tags)).filter((e=>e)).flatMap((e=>e.split(","))).map((e=>e.trim())).filter((e=>e)),r=[...new Set(t)].sort(((e,t)=>{const r=e.startsWith("Part of"),o=t.startsWith("Part of");return r&&!o?1:!r&&o?-1:e.localeCompare(t)}));this.tagList=r.map(((e,t)=>{const r=this.tagColorList[t%this.tagColorList.length];return{name:e,color:r.color,effect:r.effect}})),this.caitviList=this.caitviList.map((e=>({...e,tags:e.tags?e.tags.split(",").map((e=>e.trim())).filter((e=>e)).map((e=>this.tagList.find((t=>t.name===e)))):[]})))},openUrl(e){window.open(e,"_blank")},getReadStatusColor(e){const t=String(e).toUpperCase();switch(t){case"READ":return"success";case"UNREAD":return"info";case"DROPPED":return"danger";case"READING":return"warning"}},getCompletedStatusColor(e){const t=String(e).toUpperCase();switch(t){case"COMPLETED":return"success";case"WORK_IN_PROGRESS":return"warning";case"DISCONTINUED":return"danger";case"ONE_SHOT":return"";case"STATUS_UNKNOWN":return"info"}},filterByEqual(e,t,r){return t[r]===e},filterWordCount(e,t){const r=Number(t.wordCount.replace(/,/g,""))||0,[o,a]=e.split("-").map(Number);return a?r>=o&&r<=a:r>o},filterTags(e,t){return t.tags.some((t=>t.name===e))},refreshTable(){this.$nextTick((()=>{this.$refs.dataTable&&(this.$refs.dataTable.doLayout(),this.$refs.dataTable.store.updateColumns(),this.$refs.dataTable.store.updateAllSelected())}))}}},L=A,M=r(1656),R=(0,M.A)(L,_,w,!1,null,"bafe9986",null),P=R.exports;O["default"].use(S()),O["default"].use(v()),O["default"].use(C()),O["default"].use(m()),O["default"].use(f()),O["default"].use(c()),O["default"].use(u()),O["default"].use(l()),O["default"].use(a()),O["default"].config.productionTip=!1,new O["default"]({render:e=>e(P)}).$mount("#app")}},t={};function r(o){var a=t[o];if(void 0!==a)return a.exports;var n=t[o]={exports:{}};return e[o].call(n.exports,n,n.exports,r),n.exports}r.m=e,function(){var e=[];r.O=function(t,o,a,n){if(!o){var l=1/0;for(c=0;c<e.length;c++){o=e[c][0],a=e[c][1],n=e[c][2];for(var s=!0,u=0;u<o.length;u++)(!1&n||l>=n)&&Object.keys(r.O).every((function(e){return r.O[e](o[u])}))?o.splice(u--,1):(s=!1,n<l&&(l=n));if(s){e.splice(c--,1);var i=a();void 0!==i&&(t=i)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[o,a,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var o in t)r.o(t,o)&&!r.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,o){return r.f[o](e,t),t}),[]))}}(),function(){r.u=function(e){return"js/"+e+"."+{822:"1d11d189",911:"dcba2b24"}[e]+".js"}}(),function(){r.miniCssF=function(e){return"css/"+e+".4c1b8f23.css"}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="caitvi:";r.l=function(o,a,n,l){if(e[o])e[o].push(a);else{var s,u;if(void 0!==n)for(var i=document.getElementsByTagName("script"),c=0;c<i.length;c++){var d=i[c];if(d.getAttribute("src")==o||d.getAttribute("data-webpack")==t+n){s=d;break}}s||(u=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+n),s.src=o),e[o]=[a];var f=function(t,r){s.onerror=s.onload=null,clearTimeout(p);var a=e[o];if(delete e[o],s.parentNode&&s.parentNode.removeChild(s),a&&a.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),u&&document.head.appendChild(s)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.p="/caitvi/"}(),function(){if("undefined"!==typeof document){var e=function(e,t,o,a,n){var l=document.createElement("link");l.rel="stylesheet",l.type="text/css",r.nc&&(l.nonce=r.nc);var s=function(r){if(l.onerror=l.onload=null,"load"===r.type)a();else{var o=r&&r.type,s=r&&r.target&&r.target.href||t,u=new Error("Loading CSS chunk "+e+" failed.\n("+o+": "+s+")");u.name="ChunkLoadError",u.code="CSS_CHUNK_LOAD_FAILED",u.type=o,u.request=s,l.parentNode&&l.parentNode.removeChild(l),n(u)}};return l.onerror=l.onload=s,l.href=t,o?o.parentNode.insertBefore(l,o.nextSibling):document.head.appendChild(l),l},t=function(e,t){for(var r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var a=r[o],n=a.getAttribute("data-href")||a.getAttribute("href");if("stylesheet"===a.rel&&(n===e||n===t))return a}var l=document.getElementsByTagName("style");for(o=0;o<l.length;o++){a=l[o],n=a.getAttribute("data-href");if(n===e||n===t)return a}},o=function(o){return new Promise((function(a,n){var l=r.miniCssF(o),s=r.p+l;if(t(l,s))return a();e(o,s,null,a,n)}))},a={524:0};r.f.miniCss=function(e,t){var r={822:1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=o(e).then((function(){a[e]=0}),(function(t){throw delete a[e],t})))}}}(),function(){var e={524:0,193:0,490:0,327:0};r.f.j=function(t,o){var a=r.o(e,t)?e[t]:void 0;if(0!==a)if(a)o.push(a[2]);else if(/^(193|327|490)$/.test(t))e[t]=0;else{var n=new Promise((function(r,o){a=e[t]=[r,o]}));o.push(a[2]=n);var l=r.p+r.u(t),s=new Error,u=function(o){if(r.o(e,t)&&(a=e[t],0!==a&&(e[t]=void 0),a)){var n=o&&("load"===o.type?"missing":o.type),l=o&&o.target&&o.target.src;s.message="Loading chunk "+t+" failed.\n("+n+": "+l+")",s.name="ChunkLoadError",s.type=n,s.request=l,a[1](s)}};r.l(l,u,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,n,l=o[0],s=o[1],u=o[2],i=0;if(l.some((function(t){return 0!==e[t]}))){for(a in s)r.o(s,a)&&(r.m[a]=s[a]);if(u)var c=u(r)}for(t&&t(o);i<l.length;i++)n=l[i],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(c)},o=self["webpackChunkcaitvi"]=self["webpackChunkcaitvi"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=r.O(void 0,[541,737,188,602,193,490,327,57,160,683,611],(function(){return r(5068)}));o=r.O(o)})();
//# sourceMappingURL=app.a3d718bc.js.map