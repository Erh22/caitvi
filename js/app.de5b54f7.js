(function(){"use strict";var e={8122:function(e,t,l){var r=l(7203),o=l.n(r),a=l(6848),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("HeaderLayout"),t("div",{staticClass:"container mx-auto my-4 flex flex-col gap-6 relative min-h-[1200px]"},[t("div",{staticClass:"column-selector mb-4"},[t("el-checkbox-group",{model:{value:e.selectedColumns,callback:function(t){e.selectedColumns=t},expression:"selectedColumns"}},e._l(e.availableColumns,(function(l){return t("el-checkbox",{key:l.prop,attrs:{label:l.prop,disabled:["no","name","author","tags","wordCount","completed"].includes(l.prop)}},[e._v(e._s(l.label))])})),1)],1),t("el-table",{ref:"dataTable",staticStyle:{width:"max-content","table-layout":"fixed"},attrs:{data:e.caitviList,height:"1500px",border:"",stripe:""}},[e.selectedColumns.includes("no")?t("el-table-column",{attrs:{prop:"no",label:"",width:"40"}}):e._e(),e.selectedColumns.includes("name")?t("el-table-column",{attrs:{prop:"name",label:"名稱",width:"200"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",{staticClass:"cursor-pointer hover:text-blue-400 font-bold",on:{click:function(t){return e.openUrl(l.row.url)}}},[e._v(e._s(l.row.name))])]}}],null,!1,1632970748)}):e._e(),e.selectedColumns.includes("author")?t("el-table-column",{attrs:{prop:"author",label:"作者",width:"100","filter-method":(t,l)=>e.filterByEqual(t,l,"author"),filters:e.authorFilters}}):e._e(),e.selectedColumns.includes("chapters")?t("el-table-column",{attrs:{label:"章節",width:"100"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("span",[e._v(e._s(l.row.completedChapters)+" / "+e._s(l.row.allChapters))])]}}],null,!1,4244220072)}):e._e(),e.selectedColumns.includes("wordCount")?t("el-table-column",{attrs:{prop:"wordCount",label:"字數",width:"100","filter-method":e.filterWordCount,filters:e.wordCountFilters}}):e._e(),e.selectedColumns.includes("completed")?t("el-table-column",{attrs:{prop:"completed",label:"狀態",width:"100","filter-method":(t,l)=>e.filterByEqual(t,l,"completed"),filters:[{text:e.CONST_COMMON.completedStatus.COMPLETED,value:"COMPLETED"},{text:e.CONST_COMMON.completedStatus.WORK_IN_PROGRESS,value:"WORK_IN_PROGRESS"},{text:e.CONST_COMMON.completedStatus.ONE_SHOT,value:"ONE_SHOT"},{text:e.CONST_COMMON.completedStatus.DISCONTINUED,value:"DISCONTINUED"}]},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-tag",{attrs:{effect:"dark",type:e.getCompletedStatusColor(l.row.completed)}},[e._v(e._s(e.CONST_COMMON.completedStatus[l.row.completed]))])]}}],null,!1,3648833600)}):e._e(),e.selectedColumns.includes("lastUpdated")?t("el-table-column",{attrs:{prop:"lastUpdated",label:"最後一次更新",width:"120"}}):e._e(),e.selectedColumns.includes("read")?t("el-table-column",{attrs:{label:"閱讀",width:"100","filter-method":(t,l)=>e.filterByEqual(t,l,"read"),filters:[{text:e.CONST_COMMON.readStatus.READ,value:"READ"},{text:e.CONST_COMMON.readStatus.UNREAD,value:"UNREAD"},{text:e.CONST_COMMON.readStatus.DROPPED,value:"DROPPED"}]},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-tag",{attrs:{effect:"dark",type:e.getReadStatusColor(l.row.read)}},[e._v(e._s(e.CONST_COMMON.readStatus[l.row.read]))])]}}],null,!1,2087081184)}):e._e(),e.selectedColumns.includes("rate")?t("el-table-column",{attrs:{prop:"rate",label:"評分",width:"120"},scopedSlots:e._u([{key:"default",fn:function(l){return[t("el-rate",{attrs:{disabled:""},model:{value:l.row.rate,callback:function(t){e.$set(l.row,"rate",t)},expression:"scope.row.rate"}})]}}],null,!1,617110565)}):e._e(),e.selectedColumns.includes("comments")?t("el-table-column",{attrs:{prop:"comments",label:"簡介/心得",width:"400"}}):e._e(),e.selectedColumns.includes("hotChapters")?t("el-table-column",{attrs:{prop:"hotChapters",label:"hot",width:"100"}}):e._e()],1)],1),t("FooterLayout")],1)},s=[],u=(l(7642),l(8004),l(3853),l(5876),l(2475),l(5024),l(1698),l(8992),l(4520),l(1454),l(4373));const i="1P0J7yLE6Nd7GSSJnDW2nal2zVoM3VBfYDVjg9TO0GM8",c="AIzaSyBShPyVWqfNA1odtb42EE6cvedpSFsTmWM",d="caitvilist",p=`https://sheets.googleapis.com/v4/spreadsheets/${i}/values/${d}?key=${c}`,f=async()=>{try{const e=await u.A.get(p),t=e.data.values||[];return console.log("rows",t),t.slice(1).map((e=>({no:e[0],name:e[1],url:e[2],author:e[3],completedChapters:e[4],allChapters:e[5],completed:e[6],lastUpdated:e[7],wordCount:e[8],tags:e[9],read:e[10],rate:e[11],storySetting:e[12],comments:e[13],hotChapters:e[14]})))}catch(e){throw console.error("獲取列表失敗:",e),e}},m=Object.freeze({completedStatus:{COMPLETED:"已完結",WORK_IN_PROGRESS:"連載中",DISCONTINUED:"疑似斷更",ONE_SHOT:"單篇"},readStatus:{READ:"已閱讀",UNREAD:"閒置中",DROPPED:"已棄置"}});var h=function(){var e=this;e._self._c;return e._m(0)},C=[function(){var e=this,t=e._self._c;return t("header",{staticClass:"h-16 bg-gray-950 flex items-center justify-center"},[t("h1",{staticClass:"text-white text-xl font-bold"},[e._v("CaitVi")])])}],b={name:"HeaderLayout"},O=b,v=l(1656),_=(0,v.A)(O,h,C,!1,null,"2e385640",null),S=_.exports,w=function(){var e=this;e._self._c;return e._m(0)},y=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"flex flex-row justify-center items-center bg-current h-[150px] relative bottom-0"},[t("span",{staticClass:"text-white"},[e._v("Copyright ©2024 h2")])])}],g={name:"FooterLayout"},N=g,x=(0,v.A)(N,w,y,!1,null,null,null),E=x.exports,T={name:"App",components:{HeaderLayout:S,FooterLayout:E},data(){return{CONST_COMMON:m,caitviList:[],tagColorList:["#DDEB9D","#A0C878","#27667B","#143D60"],availableColumns:[{prop:"no",label:"編號"},{prop:"name",label:"名稱"},{prop:"author",label:"作者"},{prop:"chapters",label:"章節"},{prop:"wordCount",label:"字數"},{prop:"completed",label:"狀態"},{prop:"lastUpdated",label:"最後一次更新"},{prop:"read",label:"閱讀"},{prop:"rate",label:"評分"},{prop:"comments",label:"簡介/心得"},{prop:"tags",label:"標籤"},{prop:"hotChapters",label:"hot"}],selectedColumns:["no","name","author","chapters","wordCount","completed","rate","comments","tags"],wordCountFilters:[{text:"<5,000",value:"0-5000"},{text:"5,001~10,000",value:"5001-10000"},{text:"10,001~50,000",value:"10001-50000"},{text:"50,001~100,000",value:"50001-100000"},{text:"100,001~150,000",value:"100001-150000"},{text:"150,001~200,000",value:"150001-200000"},{text:">200,000",value:"200001-"}]}},computed:{authorFilters(){const e=[...new Set(this.caitviList.map((e=>e.author)))].filter((e=>e)).sort();return e.map((e=>({text:e,value:e})))}},mounted(){this.initList();const e=localStorage.getItem("selectedColumns");if(e){const t=JSON.parse(e),l=["no","name","author"];this.selectedColumns=[...new Set([...l,...t])],this.refreshTable()}},watch:{selectedColumns:{handler(e){localStorage.setItem("selectedColumns",JSON.stringify(e))},deep:!0}},methods:{async initList(){const e=await f();this.caitviList=e.map((e=>({...e,rate:Number(e.rate)||0}))),console.log("caitviList",this.caitviList)},openUrl(e){window.open(e,"_blank")},getReadStatusColor(e){const t=String(e).toUpperCase();switch(t){case"READ":return"success";case"UNREAD":return"info";case"DROPPED":return"danger"}},getCompletedStatusColor(e){const t=String(e).toUpperCase();switch(t){case"COMPLETED":return"success";case"WORK_IN_PROGRESS":return"info";case"DISCONTINUED":return"danger";case"ONE_SHOT":return"warning"}},filterByEqual(e,t,l){return t[l]===e},filterWordCount(e,t){const l=Number(t.wordCount.replace(/,/g,""))||0,[r,o]=e.split("-").map(Number);return o?l>=r&&l<=o:l>r},refreshTable(){this.$nextTick((()=>{this.$refs.dataTable&&(this.$refs.dataTable.doLayout(),this.$refs.dataTable.store.updateColumns(),this.$refs.dataTable.store.updateAllSelected())}))}}},D=T,M=(0,v.A)(D,n,s,!1,null,null,null),R=M.exports;a["default"].config.productionTip=!1,a["default"].use(o()),new a["default"]({render:e=>e(R)}).$mount("#app")}},t={};function l(r){var o=t[r];if(void 0!==o)return o.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,l),a.exports}l.m=e,function(){var e=[];l.O=function(t,r,o,a){if(!r){var n=1/0;for(c=0;c<e.length;c++){r=e[c][0],o=e[c][1],a=e[c][2];for(var s=!0,u=0;u<r.length;u++)(!1&a||n>=a)&&Object.keys(l.O).every((function(e){return l.O[e](r[u])}))?r.splice(u--,1):(s=!1,a<n&&(n=a));if(s){e.splice(c--,1);var i=o();void 0!==i&&(t=i)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,o,a]}}(),function(){l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,{a:t}),t}}(),function(){l.d=function(e,t){for(var r in t)l.o(t,r)&&!l.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){l.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};l.O.j=function(t){return 0===e[t]};var t=function(t,r){var o,a,n=r[0],s=r[1],u=r[2],i=0;if(n.some((function(t){return 0!==e[t]}))){for(o in s)l.o(s,o)&&(l.m[o]=s[o]);if(u)var c=u(l)}for(t&&t(r);i<n.length;i++)a=n[i],l.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return l.O(c)},r=self["webpackChunkcaitvi"]=self["webpackChunkcaitvi"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=l.O(void 0,[504],(function(){return l(8122)}));r=l.O(r)})();
//# sourceMappingURL=app.de5b54f7.js.map